# https://espanso.org/docs/
# ------------------------------------------

matches:
  - replace: |
      file_name=$(basename "$input_path")
      ext="${file_name##*.}"
      file_without_extension="${file_name%.*}"
      file_name=$(basename "$input_path" .txt) # when extension is know, e.g. .txt
      parent_folder=$(dirname "$input_path")
    label: 🐚 Extract file name, extension or folder from path
  - replace: cd "$(dirname "$0")"
    label: 🐚 Go to directory of script (location)
  - replace: qlmanage -p "$filepath"
    label: 🐚 Quick Look file
  - replace: |
      plutil -extract name.childkey xml1 -o - example.plist | sed -n 4p | cut -d">" -f2 | cut -d"<" -f1
    label: 🐚 Read plist value
  - replace: |
      if [[ "$LONG_STRING" =~ "$SHORTSTRING" ]] ; then
      	echo "short string is part of long string"
      fi
    label: 🐚 String Includes
  - replace: '[[ "$LONG_STRING" =~ "$SHORT_STRING" ]]'
    label: 🐚 String contains other string
  - trigger: "!sed"
    replace: "| sed 's/$|$//g' "
    label: 🐚 pipe to sed
  - trigger: "!null"
    replace: "&> /dev/null"
    label: 🐚 dev/null
  - trigger: "!cli"
    label: "🐚 CLI Availability Guard Clause"
    replace: |
      if ! which $|$ &> /dev/null ; then
        echo "XXX not installed."
        exit 1
      fi
  - label: "🐚 Check whether process is running"
    replace: |
      if pgrep -x "app$|$" > /dev/null; then
      	echo "Running"
      else
      	echo "Not running"
      fi
  - triggers: ["!color", "!reset"]
    replace: "\\033[0m"
    label: reset
  - triggers: ["!color", "!black"]
    replace: "\\033[1;30m"
    label: fg black
  - triggers: ["!color", "!red"]
    replace: "\\033[1;31m"
    label: fg red
  - triggers: ["!color", "!green"]
    replace: "\\033[1;32m"
    label: fg green
  - triggers: ["!color", "!yellow"]
    replace: "\\033[1;33m"
    label: fg yellow
  - triggers: ["!color", "!blue"]
    replace: "\\033[1;34m"
    label: fg blue
  - triggers: ["!color", "!magenta"]
    replace: "\\033[1;35m"
    label: fg magenta
  - triggers: ["!color", "!cyan"]
    replace: "\\033[1;36m"
    label: fg cyan
  - triggers: ["!color", "!white"]
    replace: "\\033[1;37m"
    label: fg white
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;40m"
    label: bg black
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;41m"
    label: bg red
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;42m"
    label: bg green
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;43m"
    label: bg yellow
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;44m"
    label: bg blue
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;45m"
    label: bg magenta
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;46m"
    label: bg cyan
  - triggers: ["!color", "!bg"]
    replace: "\\033[1;47m"
    label: bg white
