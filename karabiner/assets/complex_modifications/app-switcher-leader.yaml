title: ðŸ”º App Switcher
homepage: https://github.com/chrisgrieser/dotfiles/karabiner
definitions:
  - conditions: &leader-active
      - type: variable_if
        name: LEADER_ACTIVE
        value: true
  - &deactivate-leader set_variable:
      name: LEADER_ACTIVE
      value: false
  - &remove-notice set_notification_message:
      id: leader-notice
      text: ""

#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
rules:
  - description: 'ðŸ”º L-Ctrl (Non-Apple) / fn (Apple)'
    manipulators:
      - type: basic
        description: Non-Apple Keyboard
        from:
          key_code: left_control
        to:
          - key_code: left_control
        parameters:
          basic.to_if_alone_timeout_milliseconds: 600
        conditions:
          - type: variable_unless
            name: LEADER_ACTIVE
            value: true
          - type: device_unless
            identifiers:
              - vendor_id: 76
                is_keyboard: true
        to_if_alone:
          - key_code: left_control
          - set_variable:
              name: LEADER_ACTIVE
              value: true
          - set_notification_message:
              id: leader-notice
              text: ðŸ”º Leader
      - description: '2x Leader: F19'
        type: basic
        from:
          key_code: left_control
        to:
          - key_code: left_control
        conditions:
          - type: variable_if
            name: LEADER_ACTIVE
            value: true
          - type: device_unless
            identifiers:
              - vendor_id: 76
                is_keyboard: true
          - type: device_if
            description: Prevent footpedal from accidentally triggering twice.
            identifiers:
              - is_pointing_device: false
        to_if_alone:
          - key_code: f19
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      - type: basic
        description: Apple Keyboard
        from:
          key_code: fn
        to:
          - key_code: fn
        conditions:
          - type: variable_unless
            name: LEADER_ACTIVE
            value: true
          - type: device_if
            identifiers:
              - vendor_id: 76
                is_keyboard: true
        parameters:
          basic.to_if_alone_timeout_milliseconds: 600
        to_if_alone:
          - key_code: fn
          - set_variable:
              name: LEADER_ACTIVE
              value: true
          - set_notification_message:
              id: leader-notice
              text: ðŸ”º Leader
      - description: '2x Leader: F19'
        type: basic
        from:
          key_code: fn
        to:
          - key_code: fn
        conditions:
          - type: variable_if
            name: LEADER_ACTIVE
            value: true
          - type: device_if
            identifiers:
              - vendor_id: 76
                is_keyboard: true
        to_if_alone:
          - key_code: f19
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""

  #â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - description: ðŸ”º App Switcher Actions
    manipulators:
      # Cancel (Esc/Hyper)
      - type: basic
        description: Leader Cancel
        from:
          key_code: escape
        conditions: *leader-active
        to:
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      - type: basic
        description: 'Hyper (Esc): Leader Cancel'
        from:
          key_code: caps_lock
        conditions: *leader-active
        to_if_alone:
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [.] Emoji Inserter
      - type: basic
        from:
          key_code: period
        to:
          - key_code: spacebar
            modifiers:
              - control
              - command
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
        conditions: *leader-active
      # [C]alendar: BusyCal
      - type: basic
        from:
          key_code: c
        conditions: *leader-active
        to:
          - shell_command: open -a 'BusyCal'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [,]: System Preferences
      - type: basic
        from:
          key_code: comma
        conditions: *leader-active
        to:
          - shell_command: open -a 'System Preferences'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [O]bsidian
      - type: basic
        from:
          key_code: o
        conditions: *leader-active
        to:
          - shell_command: open -a 'Obsidian'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [D]iscord
      - type: basic
        from:
          key_code: d
        conditions: *leader-active
        to:
          - shell_command: open -a 'Discord'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [Z]oom
      - type: basic
        from:
          # switched y and z due to German Keyboard
          key_code: "y"
        conditions: *leader-active
        to:
          - shell_command: open -a 'zoom.us'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [E]ditor: Neovim
      - type: basic
        from:
          key_code: e
        conditions: *leader-active
        to:
          - shell_command: osascript -e 'tell application "Neovide" to activate'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # D[r]afts
      - type: basic
        from:
          key_code: r
        conditions: *leader-active
        to:
          - shell_command: open -a 'Drafts'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [S]lack
      - type: basic
        from:
          key_code: s
        conditions: *leader-active
        to:
          - shell_command: open -a 'Slack'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # Script Editor [Q]
      - type: basic
        from:
          key_code: q
        conditions: *leader-active
        to:
          - shell_command: open -a 'Script Editor'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [M]imestream
      - type: basic
        from:
          key_code: m
        conditions: *leader-active
        to:
          - shell_command: open -a 'Mimestream'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # Brave [B]rowser
      - type: basic
        from:
          key_code: b
        conditions: *leader-active
        to:
          - shell_command: open -a 'Brave Browser'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # Brave [B]rowser: re-open tab (Shift)
      - type: basic
        from:
          key_code: b
          modifiers:
            mandatory:
              - shift
        conditions: *leader-active
        to:
          - shell_command: osascript -e 'tell application "Brave Browser" to activate'
          - key_code: vk_none
            hold_down_milliseconds: 250
          - key_code: t
            modifiers:
              - command
              - shift
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [l]ocate: Marta
      - type: basic
        from:
          key_code: l
        conditions: *leader-active
        to:
          - shell_command: open -a "Marta"
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [H]ammerspoon
      - type: basic
        from:
          key_code: h
        conditions: *leader-active
        to:
          - shell_command: open -a 'Hammerspoon'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [K]arabiner-EventViewer
      - type: basic
        from:
          key_code: k
        conditions: *leader-active
        to:
          - shell_command: open -a 'Karabiner-EventViewer'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [X] MacPass
      - type: basic
        from:
          key_code: x
        conditions: *leader-active
        to:
          # for some reason opening once sometimes puts MacPass in the bg
          - shell_command: 'open -a "MacPass" ; sleep 0.3 ; open -a "MacPass"'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [Y]ouTube
      - type: basic
        from:
          key_code: z  # switched y and z due to German Keyboard
        conditions: *leader-active
        to:
          - shell_command: open -a 'YouTube' || open 'https://www.youtube.com/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [A]lfred Preferences
      - type: basic
        from:
          key_code: a
        conditions: *leader-active
        to:
          - shell_command: open -a 'Alfred Preferences'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [I]noreader
      - type: basic
        from:
          key_code: i
        conditions: *leader-active
        to:
          - shell_command: open -a 'Inoreader' || open 'https://www.inoreader.com/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [N]ews Reader (Reeder)
      - type: basic
        from:
          key_code: "n"
        conditions: *leader-active
        to:
          - shell_command: open -a 'Reeder' || open 'https://www.inoreader.com/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [P]DF Reader: Highlights
      - type: basic
        from:
          key_code: p
        conditions: *leader-active
        to:
          - shell_command: open -a 'Highlights'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [G]oogle Docs
      - type: basic
        from:
          key_code: g
        conditions: *leader-active
        to:
          - shell_command: open -a 'Docs' || open 'https://docs.google.com/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [V]ideo: IINA
      - type: basic
        from:
          key_code: v
        conditions: *leader-active
        to:
          - shell_command: open -a 'IINA'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [#] Color Picker
      - type: basic
        from:
          key_code: non_us_pound  # "#" on Germany keyboard
        conditions: *leader-active
        to:
          - shell_command: open -a 'Color Picker'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [W]hatsApp
      - type: basic
        from:
          key_code: w
        conditions: *leader-active
        to:
          - shell_command: open 'https://web.whatsapp.com/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [F]acebook Messenger
      - type: basic
        from:
          key_code: f
        conditions: *leader-active
        to:
          - shell_command: open 'https://www.messenger.com/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [T]elegram
      - type: basic
        from:
          key_code: t
        conditions: *leader-active
        to:
          - shell_command: open 'https://web.telegram.org/z/'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [4] (mnenic: $ sign) MoneyMoney
      - type: basic
        from:
          key_code: "4"
        conditions: *leader-active
        to:
          - shell_command: open -a 'MoneyMoney'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [?] (w/o shift, German keyboard) man page or cheatsheet
      - type: basic
        from:
          key_code: hyphen
        conditions:
          - type: variable_if
            name: LEADER_ACTIVE
            value: true
          - type: input_source_if
            input_sources:
              - language: ^de$
        to:
          - shell_command: open 'hammerspoon://focus-help'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
      # [esc] (f18) Activity Monitor
      - type: basic
        from:
          key_code: "f18"
        conditions: *leader-active
        to:
          - shell_command: open -a 'Activity Monitor'
          - set_variable:
              name: LEADER_ACTIVE
              value: false
          - set_notification_message:
              id: leader-notice
              text: ""
